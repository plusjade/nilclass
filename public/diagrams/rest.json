{
    "steps": [
        {
            "diagramStep" : "base",
            "action" : {
                "method" : "add",
                "items" : [
                    {
                        "id" : "User",
                        "name" : "User",
                        "item" : "user"
                    }


                    ,
                    {
                        "id" : "App Controller",
                        "icon" : "gatekeeper",
                        "hide" : true
                    }

                    ,
                    {
                        "id" : "ORM",
                        "icon" : "code-interface",
                        "hide" : true
                    }

                    ,
                    {
                        "item" : "dedicated-database",
                        "id" : "Database",
                        "hide" : true
                    }
                ]
            }
        }

        ,
        {
            "diagramStep" : "database",
            "action" : {
                "method" : "update",
                "items" : [
                    {
                        "id" : "Database",
                        "grid" : "right:2",
                        "hide": false
                    }
                ]
            }
        }


        ,
        {
            "diagramStep" : "database-crud",
            "actions" : [
                {
                    "method" : "update",
                    "items" : [
                        {
                            "id" : "Database",
                            "connect" : ["CREATE", "READ", "UPDATE", "DELETE"]
                        }

                        ,
                        {
                            "id" : "User",
                            "connect" : ["CREATE", "READ", "UPDATE", "DELETE"]
                        }
                    ]
                }

                ,
                {
                    "method" : "add",
                    "from" : "Database",
                    "items" : [
                        {
                            "id" : "CREATE",
                            "text" : "INSERT INTO users (name) VALUES ('jade')",
                            "text-anchor" : "start",
                            "icon" : "endpoint",
                            "grid" : "down left"
                        }

                        ,
                        {
                            "id" : "READ",
                            "text" : "SELECT * FROM users WHERE name='jade'",
                            "text-anchor" : "start",
                            "icon" : "endpoint",
                            "grid" : "down"
                        }

                        ,
                        {
                            "id" : "UPDATE",
                            "text" : "UPDATE users SET name='Jade D.' WHERE name='jade'",
                            "text-anchor" : "start",
                            "icon" : "endpoint",
                            "grid" : "down"
                        }

                        ,
                        {
                            "id" : "DELETE",
                            "text" : "DELETE FROM users  WHERE name='jade'",
                            "text-anchor" : "start",
                            "icon" : "endpoint",
                            "grid" : "down"
                        }
                    ]
                }
            ]

        }


        ,
        {
            "diagramStep" : "orm",
            "actions" : [

                {
                    "method" : "update",
                    "items" : [
                        {
                            "id" : "User",
                            "connect" : ["ORM"]
                        }
                        ,
                        {
                            "id" : "ORM",
                            "connect" : ["orm.create", "orm.read", "orm.update", "orm.delete"],
                            "grid" : "right",
                            "hide" : false
                        }
                        ,
                        {
                            "id" : "Database",
                            "grid" : "right:3"
                        }

                    ]
                }

                ,
                {
                    "method" : "add",
                    "from" : "ORM",
                    "items" : [
                        {
                            "name" : "CREATE",
                            "text" : "User.create(name: 'jade')",
                            "text-anchor" : "end",
                            "id" : "orm.create",
                            "icon" : "endpoint",
                            "grid" : "down:1 right:1"
                        }

                        ,
                        {
                            "name" : "READ",
                            "text" : "user = User.find_by_name('jade')",
                            "text-anchor" : "end",
                            "id" : "orm.read",
                            "icon" : "endpoint",
                            "grid" : "down"
                        }

                        ,
                        {
                            "name" : "UPDATE",
                            "text" : "user.update(name: 'Jade D.')",
                            "text-anchor" : "end",
                            "id" : "orm.update",
                            "icon" : "endpoint",
                            "grid" : "down"
                        }

                        ,
                        {
                            "name" : "DELETE",
                            "text" : "user.destroy",
                            "text-anchor" : "end",
                            "id" : "orm.delete",
                            "icon" : "endpoint",
                            "grid" : "down"
                        }
                    ]
                }
            ]

        }




        ,
        {
            "diagramStep" : "orm-crud",
            "action" : {
                "method" : "add",
                "from" : "ORM",
                "items" : [
                    {
                        "name" : "-",
                        "text" : "",
                        "id" : "d.orm.create",
                        "icon" : "exchange",
                        "grid" : "down:1 right:1.5",
                        "connect" : ["CREATE", "orm.create"]
                    }

                    ,
                    {
                        "name" : "-",
                        "id" : "d.orm.read",
                        "icon" : "exchange",
                        "grid" : "down",
                        "connect" : ["READ", "orm.read"]
                    }

                    ,
                    {
                        "name" : "-",
                        "text" : "",
                        "id" : "d.orm.update",
                        "icon" : "exchange",
                        "grid" : "down",
                        "connect" : ["UPDATE", "orm.update"]
                    }

                    ,
                    {
                        "name" : "-",
                        "text" : "",
                        "id" : "d.orm.delete",
                        "icon" : "exchange",
                        "grid" : "down",
                        "connect" : ["DELETE", "orm.delete"]
                    }

                ]
            }
        }

        ,
        {
            "diagramStep" : "data-api",
            "actions" : [
                {
                    "method" : "add",
                    "from" : "ORM",
                    "items" : [
                        {
                            "id" : "Data API",
                            "icon" : "span",
                            "grid" : "right:1.5 up",
                            "connect" : ["Database", "ORM"]
                        }
                    ]
                }
            ]
        }

        ,
        {
            "diagramStep" : "app-controller",
            "actions" : [
                {
                    "method" : "update",
                    "items" : [

                        {
                            "id" : "App Controller",
                            "grid" : "right",
                            "hide" : false,
                            "connect" : ["ORM"]
                        }

                        ,
                        {
                            "id" : "User",
                            "connect" : ["App Controller"]
                        }
                    ]
                }

            ]
        }

        ,
        {
            "diagramStep" : "app-api",
            "actions" : [
                {
                    "method" : "update",
                    "items" : [
                        {
                            "id" : "User",
                            "connect" : ["Web Browser"]
                        }
                    ]
                }
                ,
                {
                    "method" : "add",
                    "from" : "User",
                    "items" : [
                        {
                            "id" : "App API",
                            "icon" : "span",
                            "grid" : "right up",
                            "connect" : ["App Controller", "Web Browser"]
                        }
                    ]
                }
                ,
                {
                    "method" : "insert",
                    "from" : "User",
                    "items" : [

                        {
                            "id": "Web Browser",
                            "icon" : "web-browser",
                            "grid" : "right",
                            "connect" : ["App Controller"]

                        }

                    ]
                }

            ]
        }


        ,
        {
            "diagramStep" : "http-requests",
            "actions" : [
                {
                    "method" : "add",
                    "from" : "Web Browser",
                    "items" : [

                        {
                            "id" : "http.create",
                            "name" : "HTTP POST",
                            "text" : "",
                            "text-anchor" : "start",
                            "icon" : "endpoint",
                            "grid" : "right down"
                        }

                        ,
                        {
                            "id" : "http.read",
                            "name" : "HTTP GET",
                            "text" : "",
                            "text-anchor" : "start",
                            "icon" : "endpoint",
                            "grid" : "down"
                        }

                        ,
                        {
                            "id" : "http.update",
                            "name" : "HTTP PUT",
                            "text" : "",
                            "text-anchor" : "start",
                            "icon" : "endpoint",
                            "grid" : "down"
                        }

                        ,
                        {
                            "id" : "http.delete",
                            "name" : "HTTP DELETE",
                            "text" : "",
                            "text-anchor" : "start",
                            "icon" : "endpoint",
                            "grid" : "down"
                        }


                    ]
                }

                ,
                {
                    "method" : "update",
                    "items" : [
                        {
                            "id" : "App Controller",
                            "grid" : "right:2",
                            "connect" : ["ORM", "http.create", "http.read", "http.update", "http.delete"]
                        }
                        ,
                        {
                            "id" : "Web Browser",
                            "connect" : ["http.create", "http.read", "http.update", "http.delete"]
                        }
                    ]
                }
            ]
        }

        ,
        {
            "diagramStep" : "app-crud",
            "actions" : [
                {
                    "method" : "add",
                    "from" : "App Controller",
                    "items" : [

                        {
                            "id" : "app.create",
                            "name" : "CREATE",
                            "text" : "User#create method",
                            "text-anchor" : "start",
                            "icon" : "endpoint",
                            "grid" : "left down"
                        }

                        ,
                        {
                            "id" : "app.read",
                            "name" : "READ",
                            "text" : "User#show method",
                            "text-anchor" : "start",
                            "icon" : "endpoint",
                            "grid" : "down"
                        }

                        ,
                        {
                            "id" : "app.update",
                            "name" : "UPDATE",
                            "text" : "User#update method",
                            "text-anchor" : "start",
                            "icon" : "endpoint",
                            "grid" : "down"
                        }

                        ,
                        {
                            "id" : "app.delete",
                            "name" : "DELETE",
                            "text" : "User#destroy method",
                            "text-anchor" : "start",
                            "icon" : "endpoint",
                            "grid" : "down"
                        }


                    ]
                }

                ,
                {
                    "method" : "update",
                    "items" : [
                        {
                            "id" : "App Controller",
                            "grid" : "right:3",
                            "connect" : ["ORM", "app.create", "app.read", "app.update", "app.delete"]
                        }
                    ]
                }
            ]
        }

        ,
        {
            "diagramStep" : "rest",
            "actions" : [
                {
                    "method" : "add",
                    "from" : "Web Browser",
                    "items" : [
                        {
                            "id" : "REST API",
                            "icon" : "rest",
                            "grid" : "up right:1.5",
                            "connect" : ["Web Browser", "App Controller"]
                        }
                    ]
                }

                ,
                {
                    "method" : "update",
                    "items" : [
                        {
                            "id" : "App API",
                            "grid" : "up:0.5 right:1.5",
                            "connect" : ["Web Browser", "App Controller"]
                        }
                    ]
                }

                ,
                {
                    "method" : "update",
                    "items" : [

                        {
                            "id" : "http.create",
                            "text" : "POST http://myapp.com/users",
                            "text-anchor" : "end"
                        }

                        ,
                        {
                            "id" : "http.read",
                            "text" : "GET http://myapp.com/users/1",
                            "text-anchor" : "end"
                        }

                        ,
                        {
                            "id" : "http.update",
                            "text" : "PUT http://myapp.com/users/1",
                            "text-anchor" : "end"
                        }

                        ,
                        {
                            "id" : "http.delete",
                            "text" : "DELETE http://myapp.com/users/1",
                            "text-anchor" : "end"
                        }

                    ]
                }

                ,
                {
                    "method" : "add",
                    "from" : "http.create",
                    "items" : [

                        {
                            "name" : "-",
                            "text" : "",
                            "id" : "a.rest.create",
                            "icon" : "exchange",
                            "grid" : "right:0.5",
                            "connect" : ["app.create", "http.create"]
                        }

                        ,
                        {
                            "name" : "-",
                            "id" : "a.rest.read",
                            "icon" : "exchange",
                            "grid" : "down",
                            "connect" : ["app.read", "http.read"]
                        }

                        ,
                        {
                            "name" : "-",
                            "text" : "",
                            "id" : "a.rest.update",
                            "icon" : "exchange",
                            "grid" : "down",
                            "connect" : ["app.update", "http.update"]
                        }

                        ,
                        {
                            "name" : "-",
                            "text" : "",
                            "id" : "a.rest.delete",
                            "icon" : "exchange",
                            "grid" : "down",
                            "connect" : ["app.delete", "http.delete"]
                        }

                    ]
                }
            ]
        }

        ,
        {
            "diagramStep" : "twitter",
            "actions" : [
                {
                    "method" : "add",
                    "from" : "User",
                    "items" : [
                        {
                            "id" : "Soundcloud.com",
                            "icon" : "software",
                            "grid" : "down",
                            "connect" : "http.read"
                        }
                    ]
                }

            ]
        }

        ,
        {
            "diagramStep" : "facebook",
            "actions" : [
                {
                    "method" : "add",
                    "from" : "User",
                    "items" : [
                        {
                            "id" : "Facebook.com",
                            "icon" : "software",
                            "grid" : "down:3",
                            "connect" : "http.create"
                        }
                    ]
                }

            ]
        }

    ]
}
